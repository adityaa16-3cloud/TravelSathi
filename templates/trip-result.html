{% extends "base.html" %}
{% block content %}

<section class="result-page">

    <div class="result-card">

        <!-- HEADER -->
        <h2 class="result-title">ğŸŒ Your Trip to {{ destination }}</h2>
        <p class="result-subtitle">
            A {{ days }}-day {{ hotel_type }} trip
            {% if start_date %} starting {{ start_date }}{% endif %}
        </p>

        <!-- TRIP OVERVIEW -->
        <div class="trip-overview">
            <div>ğŸ“ <strong>{{ destination }}</strong></div>
            <div>ğŸ‘¥ <strong>{{ people }} Travelers</strong></div>
            <div>ğŸ¨ <strong>{{ hotel_type }}</strong></div>
            <div>ğŸ“… <strong>{{ days }} Days</strong></div>
        </div>

        <!-- BUDGET -->
        <div class="budget-section">
            <h3>ğŸ’° Estimated Budget</h3>

            <!-- MAIN TOTAL (SAFE) -->
            <h1 class="total-budget">
                â‚¹ {{ budget | default(0) | int }}
            </h1>

            <div class="budget-breakdown">
                <p>ğŸ¨ Hotel: â‚¹ {{ hotel_cost | default(0) | int }}</p>
                <p>ğŸ½ï¸ Food: â‚¹ {{ food_cost | default(0) | int }}</p>

                {% if is_international %}
                    <p>âœˆï¸ International Flights: â‚¹ {{ transport_cost | default(0) | int }}</p>
                    <p>ğŸ›‚ Visa Fees: â‚¹ {{ visa_cost | default(0) | int }}</p>
                {% else %}
                    <p>ğŸš† / âœˆï¸ Travel: â‚¹ {{ transport_cost | default(0) | int }}</p>
                {% endif %}

                <p>ğŸŸï¸ Activities: â‚¹ {{ activities_cost | default(0) | int }}</p>
            </div>

            <!-- FINAL TOTAL AGAIN -->
            <div class="final-total">
                <hr>
                <h3>
                    âœ… Total Trip Cost:
                    <span>â‚¹ {{ budget | default(0) | int }}</span>
                </h3>
            </div>
        </div>

        <!-- SMART ITINERARY -->
        <div class="itinerary">
            <h3>ğŸ—ºï¸ Suggested Itinerary</h3>

            {% for day_plan in itinerary %}
                <div class="day-card">
                    {{ day_plan }}
                </div>
            {% endfor %}
        </div>

        <!-- MAP PREVIEW -->
        <div class="map-preview">
            <h3>ğŸ“ Location Preview</h3>

            <iframe
                src="https://www.google.com/maps?q={{ destination }}&output=embed"
                width="100%"
                height="300"
                style="border-radius:16px;border:0;"
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade">
            </iframe>
        </div>

        <!-- ACTION BUTTONS -->
        <div class="action-buttons">
            <a href="/plan-trip" class="btn-secondary">
                ğŸ”„ Plan Another Trip
            </a>

            <a href="https://www.makemytrip.com/hotels/"
               target="_blank"
               class="btn-primary">
                ğŸ¨ Book Hotels on MakeMyTrip
            </a>
        </div>

    </div>

</section>

{% endblock %}
